# DMG Operation Node Guide

It is strongly recommended that when using DMG, best practices are followed. DMG's security tools provide for the possibility of a secure and reliable system, but these tools must be used with proper care.

## Private Keys

All private keys in DMG are expected to be kept safe from loss and unauthorized access. To safeguard against these problems, all transactions in DMG must be signed with multiple signatures.

- Do limit access and visibility of private keys as much as possible.
- Do make separate backups of all private keys.
- Do continue to keep keys secure and backed up even after revocation or spends.

<br>

- Do not keep multiple co-signing keys together.
- Do not blindly co-sign. Independently verify.
- Do not keep unused private keys in a hot wallet.

Should a private key be lost or compromised, the key owner must immediately report the key lost or compromised. Key access should then be adjusted as soon as possible: controlled funds should be moved and if an admin key, access should be revoked.

## Key Provisioning

To provision a key (issue, provision, validate, ASP):

1. The intended key owner securely generates and stores an ECDSA private/public key pair.
2. Over an authenticated channel the public key owner submits the public key to the provisioning party.
3. The provisioning party incorporates that public key into an admin transaction, adding it to the chain admin state.

## DMG Nodes

Nodes verify the chain data in a tamper-resistant way. It's recommended that all node data be published to and read from a DMG node to achieve the strongest verification guarantees. Nodes are also recommended to complement their peer lists with manually added peers from known 3rd parties.

- Do make sure that nodes can be well connected to the outside network to ensure maximal chain visibility.
- Do restrict access to the system running the node.
- Do open listening ports for nodes that are not absolutely critical to operations.

<br>

- Do not use addrindex or txindex if not necessary.
- Do not use the command line to pass RPC credentials, use a config file.
- Do not run a node on a system without sufficient drive space, memory, CPU or bandwidth to process the chain data.

## User Keys

User keys are one of the two keys required in the standard way to move tokens in DMG. These should be generated by users themselves, they are not provisioned.

- Do use HD key derivation for ease of key backup.

<br>

- Do not use a single user key in more than one transaction.

## Validate Keys

Validate keys are used to sign blocks. It is very important that these keys are not compromised, as they can update or rewrite the ledger.

- Do use the validate key on a node with a decent CPU.
- Do use the recommended settings for block construction, especially prioritizing admin transactions.
- Do connect the block generating node to the network at multiple diverse points to avoid a network partition.

<br>

- Do not expose the block generating node directly to outside connections, use one or more border nodes.

## ASP Keys

ASP keys are used to co-sign fund movement transactions. They help protect the network from double-spending, from flooding, from undesired fund movement.

- Do perform rigorous checks when co-signing to confirm user intent and identity.
- Do be responsive to user key loss, helping move their funds when user keys are lost.
- Do broadcast all co-signed transactions and confirm they are included in blocks.

<br>

- Do not allow unlimited co-signing of transactions without rate limits.
- Do not create multiple keys to bypass the multi-sig constraints.
- Do not sign double-spend transactions.
- Do not be the first co-signer on a transaction, unless performing a recovery transaction.

## Issue Keys

Issue keys are used to add and remove value from the total supply. These keys control the outstanding tokens so they are intended to be used only in cold environments in limited ways and by the system root authority.

- Do pre-fill a buffer wallet with a large number of tokens, to avoid touching the issue keys as much as possible.

## Root Keys

Root keys are used to add and revoke provision and issue keys. Ownership of these keys should be very tightly restricted and these keys should be used in cold environments only.

- Do not add provision or issue keys excessively, only extremely trusted partners should have access to these keys.

## Provision Keys

Provision keys are used to add and revoke ASP and validate keys. These keys should be the main workhorse for managing the network privileged roles, especially with adding and revoking ASP keys.

- Do not add excessive numbers of validate keys.
